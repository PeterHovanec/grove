"use strict";class t{constructor(e={key:"",node:null},r=!1){if(!(r||e.key&&"string"==typeof e.key))throw new Error("Parent key cannot be null, empty or not type of string!");if(!(r||e.node&&e.node instanceof t))throw new Error("Parent node cannot be null, empty or not class of TrieNode");this._parent=e,this._children={},this.data=null,this.isEndOfWord=!1,this.word=null}get parent(){return this._parent}get children(){return this._children}update(t){this.isEndOfWord=!!t,this.data=t,this.isEndOfWord||(this.word=null)}unlink(){this._parent={key:"",node:null}}hasChildren(){return Object.keys(this._children).length>0}deleteChild(t){this._children[t]&&(this._children[t].update(null),this._children[t].unlink(),this._children[t].word=null,delete this._children[t])}addChild(t,e){if(!t||!e)return null;const r=this._children[t];return this._children[t]=e,r}hasChild(t){return!!this._children[t]}}class e{constructor(t){this.value=t,this.children=[],this.parent=null,this.pattern=null}addChild(t,e=null){t.parent=this;const r=e||this.parent?.globalPattern;t.pattern=e,this.insertChild(t,r)}insertChild(t,e){e=e||[],this.children.push(t),this.children.sort(((t,r)=>{const n=e.indexOf(t.value),i=e.indexOf(r.value);return-1!==n&&-1!==i?n-i:-1!==n?-1:-1!==i?1:t.value.toLowerCase()===r.value.toLowerCase()?t.value<r.value?-1:1:t.value.toLowerCase()<r.value.toLowerCase()?-1:1}))}printNode(t="",e=!0){let r=e?"└── ":"├── ";null!==this.value&&null!==this.pattern&&console.log(`${t}${r}${this.value} (${this.pattern})`);const n=t+(e?"    ":"│   ");this.children.forEach(((t,e)=>{t.printNode(n,e===this.children.length-1)}))}getChildrenCount(){return this.children.length}findChild(t){return this.children.find((e=>e.value===t))||null}getSiblings(){return this.parent?this.parent.children.filter((t=>t!==this)):[]}}exports.OrdinalNode=e,exports.OrdinalTree=class{constructor(t=null){this.root=new e("Root"),this.globalPattern=t}add(t,r=null){let n=this.root,i=0;for(;i<t.length;){const s=t[i];let l=n.findChild(s);null!==l&&null!==r&&(l.pattern=l.pattern.concat(r)),l||(l=new e(s),n.addChild(l,r||n.pattern||this.globalPattern)),n=l,i++}}printTree(){this.root.printNode("")}getAllValues(){const t=[];return this.traverse((e=>t.push(e.value))),t}traverse(t){const e=r=>{t(r),r.children.forEach(e)};this.root&&e(this.root)}},exports.Trie=class{constructor(){this._root=new t(null,!0),this._lastIndex=1}get root(){return this._root}insert(t,e){return this._insertWord(t,e,this._root,0)}_insertWord(e,r,n,i){if(i===e.length)return n.word=e,n.update(r||this._getNextIndex()),!0;let s=e.charAt(i);return n.hasChild(s)||n.addChild(s,new t({key:s,node:n})),this._insertWord(e,r,n.children[s],i+1)}search(t){const e=this._searchNode(t,this._root,0);return e?e.data:null}_searchNode(t,e,r){if(r===t.length)return e.isEndOfWord?e:null;let n=t.charAt(r);return e.hasChild(n)?this._searchNode(t,e.children[n],r+1):null}delete(t){const e=this._searchNode(t,this._root,0);return!!e&&(e.hasChildren()?(e.update(null),!0):(this._deleteWord(e),!0))}_deleteWord(t){if(t===this._root)return;const e=t.parent;e.node.deleteChild(e.key),e.node.hasChildren()||this._deleteWord(e.node)}update(t,e){const r=this._searchNode(t,this._root,0);return!!r&&(r.update(e),!0)}getDataNode(t){return this._searchNode(t,this._root,0)}getPath(t){const e=[];e.push(this._root);for(let r=1;r<=t.length;r++)e.push(this._searchNode(t.substring(0,r),this._root,0));return e}_getNextIndex(){return this._lastIndex++}},exports.TrieNode=t;
//# sourceMappingURL=grove.js.map
